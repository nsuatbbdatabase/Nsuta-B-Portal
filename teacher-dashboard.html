<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Teacher Dashboard</title>
  <link rel="stylesheet" href="teacher-dashboard.css" />
</head>
<body>
  <button id="logoutBtn" class="logout-btn" style="float:right;margin:1rem;">Logout</button>
  <div class="dashboard-container">
    <!-- 👋 Welcome -->
    <h2 id="welcomeMessage">Welcome, [Teacher Name]</h2>

    <!-- 📌 Assigned Roles -->
    <div id="assignedRoles" class="floating-roles">
      <!-- Classes and subjects will be injected here -->
    </div>

    <!-- 🗓️ Filters -->
    <div class="filters">
      <label for="classSelect">Class:</label>
      <select id="classSelect" onchange="loadStudents()">
        <option value="">-- Select Class --</option>
      </select>

      <label for="subjectSelect">Subject:</label>
      <select id="subjectSelect" onchange="loadStudents()">
        <option value="">-- Select Subject --</option>
      </select>

      <label for="term">Term:</label>
      <select id="term">
        <option>1st Term</option>
        <option>2nd Term</option>
        <option>3rd Term</option>
      </select>

      <label for="year">Academic Year:</label>
      <input type="text" id="year" placeholder="e.g. 2025/2026" />
    </div>

    <!-- 📋 Student List -->
    <div id="studentListContainer">
      <!-- Students will be rendered here -->
    </div>

    <!-- 📝 SBA Panel -->
    <div class="collapsible-panel">
      <button class="toggle-btn" onclick="togglePanel('sbaPanel')">SBA Entry</button>
      <div id="sbaPanel" class="panel-content">
        <table>
          <thead>
            <tr>
              <th>Student</th>
              <th>Individual Test (15)</th>
              <th>Group Work (15)</th>
              <th>Class Test (15)</th>
              <th>Project Work (15)</th>
              <th>Total (60)</th>
              <th>Scaled to 50</th>
            </tr>
          </thead>
          <tbody id="sbaTableBody">
            <!-- Dynamic rows -->
          </tbody>
        </table>
        <button onclick="submitSBA()">Submit SBA</button>
      </div>
    </div>

    <!-- 🧪 Exam Panel -->
    <div class="collapsible-panel">
      <button class="toggle-btn" onclick="togglePanel('examPanel')">Exam Entry</button>
      <div id="examPanel" class="panel-content">
        <table>
          <thead>
            <tr>
              <th>Student</th>
              <th>End of Term Exam (100)</th>
              <th>Scaled to 50</th>
            </tr>
          </thead>
          <tbody id="examTableBody">
            <!-- Dynamic rows -->
          </tbody>
        </table>
        <button onclick="submitExams()">Submit Exams</button>
      </div>
    </div>

    <!-- 📨 Assignment Composer -->
    <div class="assignment-composer">
      <h3>Send Assignment to Students</h3>

      <label for="assignClass">Class:</label>
      <select id="assignClass">
        <option value="">-- Select Class --</option>
      </select>

      <label for="assignSubject">Subject:</label>
      <select id="assignSubject">
        <option value="">-- Select Subject --</option>
      </select>

      <label for="assignTerm">Term:</label>
      <select id="assignTerm">
        <option>1st Term</option>
        <option>2nd Term</option>
        <option>3rd Term</option>
      </select>

      <label for="assignYear">Academic Year:</label>
      <input type="text" id="assignYear" placeholder="e.g. 2025/2026" />

      <label for="assignTitle">Assignment Title:</label>
      <input type="text" id="assignTitle" placeholder="e.g. Algebra Practice" />

      <label for="assignText">Instructions:</label>
      <textarea id="assignText" rows="4" placeholder="Describe the task..."></textarea>

      <label for="assignFile">Upload Document (optional):</label>
      <input type="file" id="assignFile" />

      <button onclick="sendAssignment()">Send Assignment</button>
    </div>

    <!-- 📥 Assignment Inbox -->
    <div id="assignmentInbox">
      <h3>Student Assignment Submissions</h3>
      <ul id="assignmentList">
        <!-- Submitted assignments will appear here -->
      </ul>
    </div>
  </div>

  <!-- Supabase + Logic -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <script src="teacher-dashboard.js"></script>
  <script src="router.js"></script>
</body>
<script>
  document.getElementById('logoutBtn').onclick = function() {
    sessionStorage.clear();
    localStorage.clear();
    window.location.href = 'index.html';
  };
</script>
</body>
</html>